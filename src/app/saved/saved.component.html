<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500&display=swap" rel="stylesheet">

<div class="container mt-3">
    <br>
    <br>
    <div id="searchFilterButtons">
            <div class="bg-white box-shadow">
                <div class="row">
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col"><h4 class="mat-display-1">Saved Recipes</h4></div>
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col">
                        <a role="button" id="randombutton" (click)="random_recipe()" matTooltip="Random" matTooltipHideDelay="500"><mat-icon>shuffle</mat-icon></a>
                    </div>
                </div>
                <div class="row">
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col">
                        <div ngbDropdown class="d-inline-block">
                            <button class="samesize montst" mat-stroked-button color="warn" id="dropdownBasic1" ngbDropdownToggle>Meal Type</button>
                            <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                                <button class="monst" ngbDropdownItem *ngFor="let mealtype of mealtypes" (click)="addFilter(mealtype,'type')" >{{ mealtype }}</button>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div ngbDropdown class="d-inline-block">
                            <button class="samesize montst" mat-stroked-button color="warn" id="dropdownBasic2" ngbDropdownToggle>Time</button>
                            <div ngbDropdownMenu aria-labelledby="dropdownBasic2">
                                <button class="monst" ngbDropdownItem *ngFor="let time of times" (click)="addFilter(time,'time')">{{ time }}</button>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div ngbDropdown class="d-inline-block">
                            <button class="samesize montst" mat-stroked-button color="warn" id="dropdownBasic3" ngbDropdownToggle>Difficulty</button>
                            <div ngbDropdownMenu aria-labelledby="dropdownBasic3">
                                <button class="monst" ngbDropdownItem *ngFor="let difficulty of difficulties" (click)="addFilter(difficulty,'difficulty')">{{ difficulty }}</button>
                            </div>
                        </div>
                    </div>
                    <div class="col"></div>
                    <div class="col-3">

                        <form class="example-form">
                          <mat-form-field color="accent" class="example-full-width">
                            <mat-label>Search Recipes</mat-label>
                            <input matInput placeholder="Ex. Pizza" value="" (change)="search_recipes()" name="searchinput" [(ngModel)]="search_value">
                            <button mat-button *ngIf="search_value" matSuffix mat-icon-button aria-label="Clear" (click)="search_value=''">
                                <mat-icon>close</mat-icon>
                            </button>
                          </mat-form-field>
                        </form>


                    </div>
                </div>
                <div class="row">
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col"></div>
                    <div class="col-3">
                    <mat-chip-list #chipList>
                        <mat-chip *ngFor="let filter of filters.keywords" (removed)="removeFilter(filter, 'keywords')">
                          {{ filter }}
                          <mat-icon matChipRemove>cancel</mat-icon>
                        </mat-chip>
                        <mat-chip *ngIf="filters.type!=''" (removed)="removeFilter(filters.type, 'type')">
                          {{ filters.type }}
                          <mat-icon matChipRemove>cancel</mat-icon>
                        </mat-chip>
                        <mat-chip *ngIf="filters.time!=''" (removed)="removeFilter(filters.type, 'time')">
                          {{ filters.time }}
                          <mat-icon matChipRemove>cancel</mat-icon>
                        </mat-chip>
                        <mat-chip *ngIf="filters.difficulty!=''" (removed)="removeFilter(filters.type, 'difficulty')">
                          {{ filters.difficulty }}
                          <mat-icon matChipRemove>cancel</mat-icon>
                        </mat-chip>
                      </mat-chip-list>
                      </div>
                </div>
            </div>
    </div>

    <!-- <hr> -->
    <!-- <mat-divider> -->
    <br><br>
    <div class="row">
        <div *ngFor="let recipe of recipes | paginate: { itemsPerPage: 9, currentPage: p }" class="col-lg-4 mb-4 grid-margin">
            <div *ngIf="recipe.pending == false">
                <mat-card class="shadow p-3 mb-5 bg-white rounded">
                    <!-- <mat-card-header class="card-header"> -->
                    <mat-card-header>
                        <mat-card-title [ngClass]="{'long': (recipe.name.length > 20), 'verylong': (recipe.name.length > 30), 'veryverylong': (recipe.name.length > 45)}"> {{ recipe.name }}</mat-card-title>
                        <!-- <mat-card-title> {{ (recipe.Name.length>20)? (recipe.Name | slice:0:20)+'..':(recipe.Name) }}</mat-card-title> -->
                    </mat-card-header>
                    <!-- <h4 class="card-header centered"> {{ (recipe.Name.length>25)? (recipe.Name | slice:0:25)+'..':(recipe.Name) }}</h4> -->
                    <!-- <img mat-card-image class="card-img-top recipe-img" src="/assets/img/recipes/{{ recipe.Name| alpha }}.jpeg" alt="image"> -->
                    <!-- <img mat-card-image *ngIf="recipe.images && recipe.images[0]" class="card-img-top recipe-img" src="{{'data:image/jpg;base64,' + recipe.images[0].filedata}}" onerror="this.src='/assets/img/placeholder.jpeg';" alt="image"> -->
                    <img mat-card-image *ngIf="hasImage(recipe.id)" class="card-img-top recipe-img" src="{{getImgDataS3(recipe)}}" onerror="this.src='/assets/img/placeholder.jpeg';" alt="image">

              <!-- <img class="card-img-top" src="/assets/img/recipes/recipe pics p1-3/{{ recipe.Name.split(' ').join('') | lowercase}}.jpeg" alt="image"> -->
              <mat-card-content class="bg-custom2">
                <div class="card-text">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-clock" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm8-7A8 8 0 1 1 0 8a8 8 0 0 1 16 0z"/>
                        <path fill-rule="evenodd" d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
                    </svg>
                    <p class="card-text inlined">{{ recipe.timelength }}</p>
                </div>
                <div class="card-text">
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-tag" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M2 2v4.586l7 7L13.586 9l-7-7H2zM1 2a1 1 0 0 1 1-1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2z"/>
                        <path fill-rule="evenodd" d="M4.5 5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm0 1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
                    </svg>
                    <p class="card-text inlined">{{recipe.type}}</p>
                </div>
                <div class="card-text">
                    <!-- <mat-icon>check_circle_outline</mat-icon> -->
                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-exclamation-diamond" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" d="M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.482 1.482 0 0 1 0-2.098L6.95.435zm1.4.7a.495.495 0 0 0-.7 0L1.134 7.65a.495.495 0 0 0 0 .7l6.516 6.516a.495.495 0 0 0 .7 0l6.516-6.516a.495.495 0 0 0 0-.7L8.35 1.134z"/>
                      <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                    </svg>
                    <p class="card-text inlined">{{recipe.difficulty}}</p>
                </div>
              </mat-card-content>
              <!-- <div class="card-footer"> -->
                  <!-- <a href="#" class="btn btn-primary stretched-link">Go somewhere</a> -->
                <a class="stretched-link" (click)="viewRecipeModal(recipe)"></a>
              <!-- </div> -->
              </mat-card>
          </div>
        </div>
    </div>

    <pagination-controls class="floatright" (pageChange)="p = $event"></pagination-controls>

</div>

